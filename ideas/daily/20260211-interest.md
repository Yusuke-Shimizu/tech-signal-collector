# 興味関心メモ: 2026-02-11

## 1. Claude Code運用の実践知 — トークン効率化と待ち時間活用

r/ClaudeCodeで「12時間/日使って制限に引っかからない」(#33, 174 ups, 160 comments)と「待ち時間をマイクロタスクに変える」(#36, 42 ups)が同日に投稿。Claude Codeのヘビーユーザー層が**運用ノウハウの蓄積フェーズ**に入っている。

### 12時間使っても制限に引っかからない方法（174 ups）
- **核心**: Max 20xプラン + Claude Code Teamsの実験的機能 + tmux
- **アーキテクチャ**: Opusは「チームリード（委任者）、要件エンジニア、アーキテクト、レッドチーム、シニアコーダー、ホワイトハット、レビュアー、監査役」の上位ロールのみ担当
- **「ダム」な作業はHaikuとSonnetに委任** → トークン消費を劇的に削減
- 1日30万トークンで週間制限の15%にとどまる
- **コメント欄の知見**: 「9つのリポジトリをVM並列で回して12時間/日」(16 ups)、「Teamsのサブエージェントはトークン消費が激しい」、「プロンプトの質が低いと一瞬で枯渇」
- **批判的視点**: 「100万SaaSアプリ × $19/月 × 0人のサブスクライバー = $0」(49 ups) — vibe codingへの皮肉も

### 待ち時間マイクロタスク（42 ups）
- **課題**: Claudeの思考待ち時間が「スマホを手に取るには十分だが、意味ある作業には短すぎる」
- **解決策**: Claude Hooksでマイクロタスクサーバーを呼び出し、10秒以内のタスクをIDE内で提供
- タスク例: タッチタイピング練習、GitHubイシューの重要度ソート、水を飲む/立ち上がるリマインダー、反射神経テスト
- **技術実装**: Hookからcurlでサーバー(FastAPI)を叩き、URLとウィンドウサイズを返す。Claude完了時に自動でタスクを閉じる
- **02/10 Deep Work思想との接続**: まさに「コンテキストスイッチの排除」の実践。スマホを触る衝動をIDE内で吸収する設計

### 自分のワークフローへの示唆
- 現在のskills構成（neta-trend-daily, neta-interest-daily）は**Opusで全処理**しているが、Pythonスクリプト化したデータ取得（#33の委任戦略と同方向）でトークン削減を実現済み
- Hooksマイクロタスクは**Claude Codeの死角（待ち時間）**を突いた面白いアプローチ

---

## 2. CLAUDE.mdの書き方 — 「500行制限」と段階的開示の設計

はてブ「効果的なCLAUDE.mdの書き方」(#6, 90 users)がClaude Code設定の実践ガイドとして話題。自分のプロジェクトのskills/rules構成と直接関連。

### 核心原則
- **「この行を削除したらClaudeが間違えるか？」** — 各行にこのテストを適用
- 公式推奨は**約500行以内**。コンテキストウィンドウを常に消費するため
- 注入時に「may or may not be relevant」という注釈が付くため、**無関係と判断されると無視される**
- フロンティアモデルで**約200個の命令が上限**。超過すると全体の遵守率が低下

### 段階的開示（Progressive Disclosure）の3層構造
- **Layer 1**: `CLAUDE.md` — 毎セッション自動読み込み。最小限に
- **Layer 2**: `.claude/rules/`、`docs/` — タスク関連時に読み込み
- **Layer 3**: `.claude/skills/`、`.claude/agents/` — オンデマンド起動

### 書くべき内容 vs 書くべきでない内容
- **書くべき**: プロジェクト固有コマンド、デフォルト外スタイル、テスト戦略、非自明なゴッチャ
- **書くべきでない**: コードで明白な内容、言語標準慣例、リンター処理可能なルール、頻繁に変わる情報
- **アンチパターン**: 詰め込みすぎ、`/init`出力の無批判利用、否定形のみの制約

### 自分のプロジェクトへの適用
- 現在の構成（`CLAUDE.md` なし → `.claude/rules/user-profile.md` + `.claude/skills/` 3つ）は**まさにLayer 2-3の段階的開示を実践中**
- `user-profile.md`が「rules」として自動ロードされるLayer 2、skillsがオンデマンドのLayer 3
- CLAUDE.mdを追加する場合は、「プロジェクト概要1-2行 + 共通コマンド」程度に留めるべき

---

## 3. 生成AIによる仕様書作成 — 上流工程がボトルネックに

はてブ「生成AIによる仕様書作成とレビューの考え方」(#1, 421 users)。CyberAgent・ジャンプTOONチームの実践。**AIでコーディングが効率化されるほど、上流工程（企画・仕様策定）がボトルネック化する**という問題への解答。

### 核心的な気づき
- **「AIが前工程（コーディング）を速くすると、後工程（仕様策定）のボトルネックが顕在化する」** — TOC（制約理論）的な発想
- 02/10の「AIは仕事を激化させる」とも接続: AIが効率化するのはコーディング部分だけで、仕様策定・設計・レビューの認知負荷は残る

### 実装の2本柱
1. **コンテキスト情報の整備**: 既存仕様書の分類（大カテゴリ/サブカテゴリ）、画面遷移図のMermaid化、用語集の定期更新
2. **手順・制約の明確化**: 統一フォーマット、多視点チェックリスト（事業/デザイン/エンジニア/ユーザ）、ステップバイステップのプロンプト

### 技術選定と運用
- **Notion AIを採用**: 既存ドキュメント資産の活用 + 非エンジニアの利便性
- BETA版として企画書レビュー・仕様書作成・仕様書レビューの**3つのAIエージェント**を試験運用中
- 2025年9月のNotionエージェント機能で応答品質が大幅改善

### 02/10からの文脈接続
- 02/10: 「AIが仕事の強度を上げている」（Berkeley Haas研究）
- 02/11: CyberAgentはそれに対し**「上流工程もAI化する」**というアプローチで全工程の効率化を目指す
- ただし「仕様策定のAI化」は判断・意思決定の領域であり、品質保証がより難しい

---

## 4. WebMCP — WebアプリをAIツール化する新標準

はてブ「Webアプリケーションをツール化する WebMCP」(#3, 145 users)。Chrome 146+で利用可能なJavaScriptインターフェースで、**Webアプリの機能をMCPツールとして公開**できる。

### 技術的仕組み
- **命令的方法**: `window.navigator.modelContext.provideContext()` でツール登録。コールバックがエージェント呼び出し時に実行
- **宣言的方法**: HTMLフォームに `toolname`/`tooldescription` 属性を追加 → 自動的にMCPツール化。入力フィールドがパラメータにマッピング
- **非同期操作、Web Worker対応**、`toolautosubmit`属性によるフォーム自動送信
- `SubmitEvent`に`agentInvoked`プロパティと`respondWith()`メソッドが追加

### スクリーンショット解析 vs 構造化API
- 従来: AIがスクリーンショットを解析してUIを操作 → 不正確、遅い
- WebMCP: **自然言語記述 + JSONスキーマの構造化API** → 正確、高速
- MCP Serverのようにサーバーサイドを用意する必要がなく、**フロントエンドだけで完結**

### 注意点
- Chrome 146+、`chrome://flags#webmcp-for-testing`フラグ有効化が必要
- **「Botの操作を禁止しているWebサービスでは規約違反の可能性」**
- まだ実験的機能だが、Claude in Chromeのような拡張機能との親和性が非常に高い

### エージェント設計への示唆
- MCPの進化方向: サーバーサイド（従来MCP Server）→ フロントエンド（WebMCP）→ **あらゆるWebアプリがAIツール化**
- Claude Code Agent Teamsがブラウザ操作タスクを委任する際の基盤技術になりうる

---

## 5. Bedrock AgentCoreとサーバーレスパターン — AWSエージェント基盤の成熟

AWS Blog JP「エンタープライズにおけるAIエージェント: Bedrock AgentCoreベストプラクティス」(#15)と「Lambda + DynamoDBクロスアカウントストリーム処理」(#16)が同日公開。**エージェント基盤 + サーバーレスの実践パターン**が揃ってきた。

### Bedrock AgentCore（#15）
- 02/10のinterestメモで「ローカルのAgent Teams vs クラウドのAgentCore」という二層構造を指摘
- ベストプラクティス記事の公開により、**エンタープライズ向けエージェント設計の公式ガイダンス**が整備された
- Bedrock AgentCore + 6つのオープンウェイトモデル対応(#14)で、**マネージド環境でのOSSモデル活用**が現実的に

### Lambda + DynamoDBクロスアカウントストリーム処理（#16）
- **課題**: マルチアカウント環境でのDynamoDBストリーム処理は、IAMロール・KMS暗号化・ネットワーク設定が複雑
- **解決策**: Lambdaのイベントソースマッピングで異なるアカウントのDynamoDBテーブル変更を自動キャッチ
- **ユースケース**: マイクロサービスのリアルタイムデータ同期、監査ログ、システム間連携

### 02/10からの接続
- 02/10: Bedrock Opus 4.6対応、構造化出力、AgentCoreブラウザプロファイル
- 02/11: AgentCoreベストプラクティス + オープンウェイトモデル6種追加
- **方向性**: Bedrockは「最新モデル対応の速さ」+「エージェント基盤」+「OSSモデル統合」の3軸で進化中

---

## 6. 「Claudeは考える場所」 — 広告なしの設計思想と開発文化の分断

Anthropic「Claude is a space to think」(#23)とr/cscareerquestions「開発文化は全部sink or swimなのか？」(#38, 183 ups)。一見無関係だが、**「集中できる環境の価値」**という共通テーマがある。

### Claudeは考える場所（Anthropic公式ブログ）
- **核心**: 広告モデルを明確に否定。「ノートを開く、良い道具を手に取る、きれいな黒板の前に立つ」ような体験を目指す
- **AIとの対話は検索やSNSと本質的に異なる**: ユーザーは個人的な文脈を共有するため、広告で収益化するのは不適切
- **ビジネスモデル**: エンタープライズ契約 + 有料サブスクリプション。60カ国以上の教育パートナーシップ
- **今後の方向**: ユーザー主導のコマース（エージェント購買）、サードパーティ統合（Figma, Asana, Canva）を予定。ただし常にユーザー制御、広告主制御ではない
- **Deep Work思想との接続**: 「考える場所」としてのClaudeは、まさにDeep Workのための道具

### 開発文化の分断（183 ups, 71 comments）
- **投稿者**: チーム異動後、新チームの「sink or swim」文化に6ヶ月耐えられず退職。以前のチームは協調的だった
- **トップコメント**: 「タスクは未完了か完璧の2状態しかない。締切は全コードが一発で動く前提」(157 ups)
- **本質的な指摘**: 「metrics-driven management（指標駆動のマネジメント）の副作用。従業員の仕事を理解しないMBA型マネジメントに多い」(128 ups)
- **バランス論**: 「高い独立性と協調的チームは排他的ではない」(28 ups)。プロダクション障害対応では自律性が必須

### 2つの記事の接続
- Anthropicが「考える場所」を提供しようとしているのに対し、現実の開発現場では**考える余裕すらない**文化が蔓延
- 02/10「AIは仕事の強度を上げている」→ 02/11「そもそも強度が高すぎる開発文化」→ AIツールの導入だけでは解決しない構造的問題
- **自分へのアクション**: シングルタスク × Deep Work × AIによる定型作業の委任、という3点セットを意識的に維持する
