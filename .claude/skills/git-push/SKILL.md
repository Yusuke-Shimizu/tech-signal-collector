---
name: git-push
description: "変更をコミットしてpush"
argument-hint: "[コミットメッセージ(省略可)]"
---

# Git Push

ステージされていない変更・未追跡ファイルをまとめてコミットし、リモートにpushする。

## 実行手順

### 1. 状態確認

以下を**並列実行**して現在の状態を把握する:
- `git status` — 変更・未追跡ファイルの確認
- `git diff` — 差分の確認
- `git log --oneline -5` — 直近のコミットメッセージのスタイル確認

### 2. コミットメッセージの決定

ユーザーの引数: `$ARGUMENTS`

- **引数あり** → その内容をコミットメッセージとして使用
- **引数なし** → 変更内容を分析して自動生成

**コミットメッセージのルール**:
- 日本語で記述
- 1行目: 変更の要約（簡潔に）
- 2行目: 空行
- 3行目以降: 変更の詳細（必要に応じて）
- 末尾に `Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>` を付与
- 直近のコミットメッセージのスタイルに合わせる

### 3. コミット & プッシュ

1. 変更ファイルを `git add` でステージング
   - `.env`、credentials等の機密ファイルは除外
   - 機密ファイルを検出した場合はユーザーに警告して確認を取る
2. `git commit` でコミット
3. `git push` でリモートにプッシュ
4. `git status` で結果を確認

### 4. 結果報告

コミットハッシュとpush先を報告する。

## 注意事項

- 変更がない場合はコミットしない
- force pushは絶対にしない
- コミットメッセージはHEREDOCで渡す（改行対応）
- pre-commit hookが失敗した場合は修正して**新しいコミット**を作成（--amendしない）
